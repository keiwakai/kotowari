<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>断り事例</title>
    <link rel="stylesheet" type="text/css" href="../../../css/style_graph.css">
    <script src="../../../js/Chart.min.js"></script>

    <script>
        var dataLabelPlugin01 = {
                afterDatasetsDraw: function(chart) {
                    var ctx = chart.ctx;
                    chart.data.datasets.forEach(function(dataset, 系列) {
                        var meta = chart.getDatasetMeta(系列);
                        if (!meta.hidden) {
                            meta.data.forEach(function(element, 要素) {
                                var データ数値 = dataset.data[要素];
                                if (データ数値 <= 0) var 比率 = "";
                                else
                                    var 比率 = データ数値.toString() + '件';
                                if (要素 == 0) ctx.fillStyle = "white";
                                else
                                    ctx.fillStyle = "black";
                                var fontSize = 11;                  // サイズ
                                var fontStyle = 'normal';           // 書体 'bold', 'italic'
                                var fontFamily = 'Meiryo UI';           // フォントの種類 'sans-serif', 'ＭＳ 明朝'
                                ctx.font = Chart.helpers.fontString(fontSize, fontStyle, fontFamily);
                                ctx.textAlign = 'end';           // 文字列　start, end, left, right, center
                                ctx.textBaseline = 'middle';        // 文字高　middle, top, bottom
                                var padding = 5;                   // グラフ基準点と文字列の距離。適宜修正
                                var position = element.tooltipPosition();
                                ctx.fillText(比率, position.x-5, position.y);
                            });
                        }
                    });
                }
            }

        function chartjsProgram01() {
            var ctx = document.getElementById('断り事例_総件数').getContext('2d');
            var myChart = new Chart(ctx, {
                type: 'horizontalBar',
                data: {
                    labels: ['2023年08月','2022年08月','2021年08月'],
                    datasets: [
                        {
                            data: [172,197,81],
                            backgroundColor: ["#4E79A7","#E6E6E6","#E6E6E6"],
                            borderColor: 'black',  // 棒の枠の色
                            borderWidth: 1      // その太さ
                        },
                    ]
                },
                options: {
                    responsive: false,
                    legend: {    // 凡例の表示位置　（凡例位置: '下'|'右' 省略時は上）
                        display: false,
                    },
                    scales: {
                        xAxes: [
                            {
                                ticks: {
                                    min: 0,
                                    max: 197,
                                    display: false
                                },
                                gridLines: {
                                    drawBorder: false
                                }
                            }
                        ],
                    }
                },
                plugins: [dataLabelPlugin01]
            });
        }

        var dataLabelPlugin02 = {
                afterDatasetsDraw: function(chart) {
                    var ctx = chart.ctx;
                    chart.data.datasets.forEach(function(dataset, 系列) {
                        var meta = chart.getDatasetMeta(系列);
                        if (!meta.hidden) {
                            meta.data.forEach(function(element, 要素) {
                                var データ数値 = dataset.data[要素];
                                if (データ数値 <= 0) var 比率 = "";
                                else
                                    var 比率 = データ数値.toString() + '件';
                                if (要素 == 0) ctx.fillStyle = "white";
                                else
                                    ctx.fillStyle = "black";            // 色　'rgb(0, 0, 0)', 'rgba(192, 80, 77, 0.7)'
                                var fontSize = 11;                  // サイズ
                                var fontStyle = 'normal';           // 書体 'bold', 'italic'
                                var fontFamily = 'Meiryo UI';           // フォントの種類 'sans-serif', 'ＭＳ 明朝'
                                ctx.font = Chart.helpers.fontString(fontSize, fontStyle, fontFamily);
                                ctx.textAlign = 'end';           // 文字列　start, end, left, right, center
                                ctx.textBaseline = 'middle';        // 文字高　middle, top, bottom
                                var padding = 5;                   // グラフ基準点と文字列の距離。適宜修正
                                var position = element.tooltipPosition();
                                ctx.fillText(比率, position.x-10, position.y);
                            });
                        }
                    });
                }
            }

        function chartjsProgram02() {
            var ctx = document.getElementById('断り事例_救急車').getContext('2d');
            var myChart = new Chart(ctx, {
                type: 'horizontalBar',
                data: {
                    labels: ['2023年08月','2022年08月','2021年08月'],
                    datasets: [
                        {
                            data: [165,192,74],
                            backgroundColor: ["#4E79A7","#E6E6E6","#E6E6E6"],
                            borderColor: 'black',  // 棒の枠の色
                            borderWidth: 1      // その太さ
                        },
                    ]
                },
                options: {
                    responsive: false,
                    legend: {    // 凡例の表示位置　（凡例位置: '下'|'右' 省略時は上）
                        display: false,
                    },
                    scales: {
                        xAxes: [
                            {
                                ticks: {
                                    min: 0,
                                    max: 192,
                                    display: false
                                },
                                gridLines: {
                                    drawBorder: false
                                }
                            }
                        ],
                    }
                },
                plugins: [dataLabelPlugin02]
            });
        }

        var dataLabelPlugin03 = {
                afterDatasetsDraw: function(chart) {
                    var ctx = chart.ctx;
                    chart.data.datasets.forEach(function(dataset, 系列) {
                        var meta = chart.getDatasetMeta(系列);
                        if (!meta.hidden) {
                            meta.data.forEach(function(element, 要素) {
                                var データ数値 = dataset.data[要素];
                                if (データ数値 <= 0) var 比率 = "";
                                else
                                    var 比率 = データ数値.toString() + '件';
                                if (要素 == 0) ctx.fillStyle = "white";
                                else
                                    ctx.fillStyle = "black";
                                var fontSize = 11;                  // サイズ
                                var fontStyle = 'normal';           // 書体 'bold', 'italic'
                                var fontFamily = 'Meiryo UI';           // フォントの種類 'sans-serif', 'ＭＳ 明朝'
                                ctx.font = Chart.helpers.fontString(fontSize, fontStyle, fontFamily);
                                ctx.textAlign = 'end';           // 文字列　start, end, left, right, center
                                ctx.textBaseline = 'middle';        // 文字高　middle, top, bottom
                                var padding = 5;                   // グラフ基準点と文字列の距離。適宜修正
                                var position = element.tooltipPosition();
                                                                //文字列の表示　 fillText(文字列, Ｘ位置, Ｙ位置)
                                ctx.fillText(比率, position.x-10, position.y);
                            });
                        }
                    });
                }
            }

        function chartjsProgram03() {
            var ctx = document.getElementById('断り事例_紹介').getContext('2d');
            var myChart = new Chart(ctx, {
                type: 'horizontalBar',
                data: {
                    labels: ['2023年08月','2022年08月','2021年08月'],
                    datasets: [
                        {
                            data: [7,3,7],
                            backgroundColor: ["#4E79A7","#E6E6E6","#E6E6E6"],
                            borderColor: 'black',  // 棒の枠の色
                            borderWidth: 1      // その太さ
                        },
                    ]
                },
                options: {
                    responsive: false,
                    legend: {    // 凡例の表示位置　（凡例位置: '下'|'右' 省略時は上）
                        display: false,
                    },
                    scales: {
                        xAxes: [
                            {
                                ticks: {
                                    min: 0,
                                    max: 7,
                                    display: false
                                },
                                gridLines: {
                                    drawBorder: false
                                }
                            }
                        ],
                    }
                },
                plugins: [dataLabelPlugin03]
            });
        }

        var dataLabelPlugin04 = {
                afterDatasetsDraw: function(chart) {
                    var ctx = chart.ctx;
                    chart.data.datasets.forEach(function(dataset, 系列) {
                        var meta = chart.getDatasetMeta(系列);
                        if (!meta.hidden) {
                            meta.data.forEach(function(element, 要素) {
                                var データ数値 = dataset.data[要素];
                                if (データ数値 <= 0) var 比率 = "";
                                else
                                    var 比率 = データ数値.toString() + '件';
                                if (要素 == 0) ctx.fillStyle = "white";
                                else
                                    ctx.fillStyle = "black";            // 色　'rgb(0, 0, 0)', 'rgba(192, 80, 77, 0.7)'
                                var fontSize = 11;                  // サイズ
                                var fontStyle = 'normal';           // 書体 'bold', 'italic'
                                var fontFamily = 'Meiryo UI';           // フォントの種類 'sans-serif', 'ＭＳ 明朝'
                                ctx.font = Chart.helpers.fontString(fontSize, fontStyle, fontFamily);
                                ctx.textAlign = 'end';           // 文字列　start, end, left, right, center
                                ctx.textBaseline = 'middle';        // 文字高　middle, top, bottom
                                var padding = 5;                   // グラフ基準点と文字列の距離。適宜修正
                                var position = element.tooltipPosition();
                                ctx.fillText(比率, position.x-10, position.y);
                            });
                        }
                    });
                }
            }

        function chartjsProgram04() {
            var ctx = document.getElementById('断り事例_電話').getContext('2d');
            var myChart = new Chart(ctx, {
                type: 'horizontalBar',
                data: {
                    labels: ['2023年08月','2022年08月','2021年08月'],
                    datasets: [
                        {
                            data: [0,2,0],
                            backgroundColor: ["#4E79A7","#E6E6E6","#E6E6E6"],
                            borderColor: 'black',  // 棒の枠の色
                            borderWidth: 1      // その太さ
                        },
                    ]
                },
                options: {
                    responsive: false,
                    legend: {    // 凡例の表示位置　（凡例位置: '下'|'右' 省略時は上）
                        display: false,
                    },
                    scales: {
                        xAxes: [
                            {
                                ticks: {
                                    min: 0,
                                    max: 2,
                                    display: false
                                },
                                gridLines: {
                                    drawBorder: false
                                }
                            }
                        ],
                    }
                },
                plugins: [dataLabelPlugin04]
            });
        }

        var dataLabelPlugin05 = {
                afterDatasetsDraw: function(chart) {
                    var ctx = chart.ctx;
                    chart.data.datasets.forEach(function(dataset, 系列) {
                        var meta = chart.getDatasetMeta(系列);
                        if (!meta.hidden) {
                            meta.data.forEach(function(element, 要素) {
                                var データ数値 = dataset.data[要素];
                                if (データ数値 <= 0) var 比率 = "";
                                else
                                    var 比率 = データ数値.toString() + '件';
                                if (要素 == 0) ctx.fillStyle = "white";
                                else
                                    ctx.fillStyle = "black";            // 色　'rgb(0, 0, 0)', 'rgba(192, 80, 77, 0.7)'
                                var fontSize = 11;                  // サイズ
                                var fontStyle = 'normal';           // 書体 'bold', 'italic'
                                var fontFamily = 'Meiryo UI';           // フォントの種類 'sans-serif', 'ＭＳ 明朝'
                                ctx.font = Chart.helpers.fontString(fontSize, fontStyle, fontFamily);
                                ctx.textAlign = 'end';           // 文字列　start, end, left, right, center
                                ctx.textBaseline = 'middle';        // 文字高　middle, top, bottom
                                var padding = 5;                   // グラフ基準点と文字列の距離。適宜修正
                                var position = element.tooltipPosition();
                                ctx.fillText(比率, position.x-10, position.y);
                            });
                        }
                    });
                }
            }

        function chartjsProgram05() {
            var ctx = document.getElementById('断り事例_ウォークイン').getContext('2d');
            var myChart = new Chart(ctx, {
                type: 'horizontalBar',
                data: {
                    labels: ['2023年08月','2022年08月','2021年08月'],
                    datasets: [
                        {
                            data: [0,0,0],
                            backgroundColor: ["#4E79A7","#E6E6E6","#E6E6E6"],
                            borderColor: 'black',  // 棒の枠の色
                            borderWidth: 1      // その太さ
                        },
                    ]
                },
                options: {
                    responsive: false,
                    legend: {    // 凡例の表示位置　（凡例位置: '下'|'右' 省略時は上）
                        display: false,
                    },
                    scales: {
                        xAxes: [
                            {
                                ticks: {
                                    min: 0,
                                    max: 0,
                                    display: false
                                },
                                gridLines: {
                                    drawBorder: false
                                }
                            }
                        ],
                    }
                },
                plugins: [dataLabelPlugin05]
            });
        }
        var dataLabelPlugin06 = {
                afterDatasetsDraw: function(chart) {
                    var ctx = chart.ctx;
                    chart.data.datasets.forEach(function(dataset, 系列) {
                        var meta = chart.getDatasetMeta(系列);
                        if (系列 == 0) {
                            if (!meta.hidden) {
                                meta.data.forEach(function(element, 要素) {
                                                                // ステップ１　数値を文字列に変換
                                    var データ数値 = dataset.data[要素];
                                    if (データ数値 <= 0) var 比率 = "";
                                    else
                                        var 比率 = データ数値.toString() + '件';
                                                                // ステップ２　文字列の書体
                                    ctx.fillStyle = 'black';            // 色　'rgb(0, 0, 0)', 'rgba(192, 80, 77, 0.7)'
                                    var fontSize = 14;                  // サイズ
                                    var fontStyle = 'normal';           // 書体 'bold', 'italic'
                                    var fontFamily = 'Meiryo UI';           // フォントの種類 'sans-serif', 'ＭＳ 明朝'
                                    ctx.font = Chart.helpers.fontString(fontSize, fontStyle, fontFamily);
                                                                // ステップ３　文字列の位置の基準点
                                    ctx.textAlign = 'center';           // 文字列　start, end, left, right, center
                                    ctx.textBaseline = 'middle';        // 文字高　middle, top, bottom
                                                                // ステップ４　文字列のグラフでの位置
                                    var padding = 5;                   // グラフ基準点と文字列の距離。適宜修正
                                    var position = element.tooltipPosition();
                                                                    //文字列の表示　 fillText(文字列, Ｘ位置, Ｙ位置)
                                    ctx.fillText(比率, position.x,position.y - (fontSize / 2) - padding);
                                });
                            }
                        }
                    });
                }
            }

        function chartjsProgram06() {
            var ctx = document.getElementById('断り事例_総件数推移').getContext('2d');
            var myChart = new Chart(ctx, {
                type: 'line',//グラフのタイプ
                fill: false,
                data: {
                    //labels: ['2023年度','2022年度','2021年度'],
                    labels: ['4月','5月','6月','7月','8月','9月','10月','11月','12月','1月','2月','3月'],
                    //{% tentou_koumoku %}
                    datasets: [
                        {
                            label: '2023年度',
                            borderColor: 'rgba(255,0,0,1)',  //グラフの線の色
                            backgroundColor: 'rgba(255,0,0,0)', //グラフの背景色透過
                            data: [66,89,82,155,172,null,null,null,null,null,null,null],
                            tension: 0,
                        },{
                            label: '2022年度',
                            borderColor: 'rgba(130,201,169,0.5)',  //グラフの線の色
                            backgroundColor: 'rgba(130,201,169,0)', //グラフの背景色透過
                            data: [93,79,80,170,197,127,111,123,220,289,110,123],
                            tension: 0,
                        },{
                            label: '2021年度',
                            borderColor: 'rgba(255,183,76,0.5)',  //グラフの線の色
                            backgroundColor: 'rgba(255,183,76,0)', //グラフの背景色透過
                            data: [73,88,68,49,81,62,59,49,74,110,122,129],
                            tension: 0,
                        }
                    ]
                },
                options: {
                    legend: {    // 凡例の表示位置　（凡例位置: '下'|'右' 省略時は上）
                    display: true//グラフの説明を表示
                        },
                    tooltips:{//グラフへカーソルを合わせた際のツールチップ詳細表示の設定
                        callbacks:{
                                label: function(tooltipItems, data) {
                                    if(tooltipItems.yLabel == "0"){
                                        return "";
                                    }
                                    return data.datasets[tooltipItems.datasetIndex].label + "：" + tooltipItems.yLabel + "件";//Kgを最後につける
                                }
                            }
                        },
                    title: {     // タイトルの表示（タイトル: 'タイトル文'）
                        display: true,
                        fontSize: 18,
                        position: "top",
                        text: '断り事例_総件数_推移'
                    },
                    
                    scales: {
                        yAxes: [
                            {
                                //display: false,
                                //stacked: true,
                                ticks: {
                                    // 下記のように固定値ではなく、
                                    // データに応じて算出するのがいいと思います
                                    min: 0,
                                },
                            }
                        ],
                        xAxes: [
                            {
                                //display: true,
                                //stacked: true,
                        },
                        ],
                    }
                },
                plugins: [dataLabelPlugin06]
            });
        }

        var dataLabelPlugin07 = {
            afterDatasetsDraw: function(chart) {
                var 合計 = 172;
                var 凡例位置 = '内';
                var 数量表示 = true;
                var ctx = chart.ctx;
                chart.data.datasets.forEach(function(dataset, i) {
                    var meta = chart.getDatasetMeta(i);
                    if (!meta.hidden) {
                        meta.data.forEach(function(element, 要素) {
                            var 要素値 = dataset.data[要素];
                            ctx.fillStyle = 'black';            // 色　'rgb(0, 0, 0)', 'rgba(192, 80, 77, 0.7)'
                            var fontSize = 14;                  // サイズ  
                            var fontStyle = 'normal';           // 書体 'bold', 'italic'
                            var fontFamily = 'Meiryo UI';           // フォントの種類 'sans-serif', 'ＭＳ 明朝'
                            ctx.font = Chart.helpers.fontString(fontSize, fontStyle, fontFamily);
                            ctx.textAlign = 'center';           // 文字列　start, end, left, right, center
                            ctx.textBaseline = 'middle';        // 文字高　middle, top, bottom
                            var padding = 5;                   // 点と文字列の距離
                            var position = element.tooltipPosition();
                            var 要素名 = chart.data.labels[要素];
                            if (要素値 > 0) {
                                ctx.fillText(要素名, position.x, position.y-15);
                                var 比率 = (要素値/合計*100).toFixed(1) + '%';
                                ctx.fillText(比率, position.x, position.y);
                            }
                            
                        });
                    }
                });
            }
        }
        
        function chartjsProgram07() {
            var ctx = document.getElementById('断り事例_来院区分').getContext('2d');
            var myChart = new Chart(ctx, {
                type: 'doughnut', 
                data: {
                    labels: ['救急車','紹介'],  // 要素名（賛成、反対など）
                    //labels: ['救急車','紹介','電話','ウォークイン'],  // 要素名（賛成、反対など）
                    datasets: [
                        {
                            data: [165,7],
                            //data: [65, 1, 0, 0],
                            backgroundColor: ['#C6E7D8','#FFDFAE'], // 円弧の塗りつぶし色
                            //backgroundColor: ['#C6E7D8','#FFDFAE','#76B7B2','#F28E2B'], // 円弧の塗りつぶし色
                            borderColor: 'black',                                // 境界線の色
                            borderWidth: 0.5                                       // 境界線の幅
                        }
                    ]
                },
                options: {
                    responsive: false,
                    cutoutPercentage: 50,    // 中央空白サイズ% 0 円グラフ　50 ドーナッツ
                    legend: {    // 凡例の表示位置　（凡例位置: '下'|'右'|'外' 省略時は上）
                        display: false
                    },
                    title: {     // タイトルの表示（タイトル: 'タイトル文'）
                        display: true,
                        fontSize: 18,
                        position: "top",
                        text: '断り事例_来院区分'
                    },
                },
                plugins: [dataLabelPlugin07]
            });
        }
    </script>
</head>
<header class="midashi">
    <h2>2023年08月_断り実績</h2>
</header>
<body onLoad="chartjsProgram01();chartjsProgram02();chartjsProgram03();chartjsProgram04();chartjsProgram05();chartjsProgram06();chartjsProgram07()">
    <table align="center">
        <td>
            <table width="217" class="table1">
                <tr>
                    <td colspan="2" align="center" class="m1">断り事例<br>総件数</td>
                </tr>
                <tr>
                    <td align="center" class="suchi"><a href="#" title="" class="dw_arrow">172件</a></td>
                    <!-- {% tentou_data1 %} -->
                </tr>
            </table>
        </td>
        <td>
            <table width="217" class="table1">
                <tr>
                    <td colspan="2" align="center" class="m1">断り事例（再掲）<br>救急車</td>
                </tr>
                <tr>
                    <td align="center" class="suchi"><a href="#" title="" class="dw_arrow">165件</a></td>
                    <!-- {% tentou_data1 %} -->
                </tr>
            </table>
        </td>
        <td>
            <table width="217" class="table1">
                <tr>
                    <td colspan="2" align="center" class="m1">断り事例（再掲）<br>紹介</td>
                </tr>
                <tr>
                    <td align="center" class="suchi"><a href="#" title="" class="up_arrow">7件</a></td>
                    <!-- {% tentou_data1 %} -->
                </tr>
            </table>
        </td>
        <td>
            <table width="217" class="table1">
                <tr>
                    <td colspan="2" align="center" class="m1">断り事例（再掲）<br>電話</td>
                </tr>
                <tr>
                    <td align="center" class="suchi"><a href="#" title="" class="dw_arrow">0件</a></td>
                    <!-- {% tentou_data1 %} -->
                </tr>
            </table>
        </td>
        <td>
            <table width="217" class="table1">
                <tr>
                    <td colspan="2" align="center" class="m1">断り事例（再掲）<br>ウォークイン</td>
                </tr>
                <tr>
                    <td align="center" class="suchi"><a href="#" title="" class="bs_arrow">0件</a></td>
                    <!-- {% tentou_data1 %} -->
                </tr>
            </table>
        </td>
    </table>
    <table align="center">
        <td>
            <table align="center" cellpadding="10" class="table2">
                <tr>
                    <td><canvas id='断り事例_総件数' width='195' height='100'></canvas></td>
                </tr>
            </table>
        </td>
        <td>
            <table align="center" cellpadding="10" class="table2">
                <tr>
                    <td><canvas id='断り事例_救急車' width='195' height='100'></canvas></td>
                </tr>
            </table>
        </td>
        <td>
            <table align="center" cellpadding="10" class="table2">
                <tr>
                    <td><canvas id='断り事例_紹介' width='195' height='100'></canvas></td>
                </tr>
            </table>
        </td>
        <td>
            <table align="center" cellpadding="10" class="table2">
                <tr>
                    <td><canvas id='断り事例_電話' width='195' height='100'></canvas></td>
                </tr>
            </table>
        </td>
        <td>
            <table align="center" cellpadding="10" class="table2">
                <tr>
                    <td><canvas id='断り事例_ウォークイン' width='195' height='100'></canvas></td>
                </tr>
            </table>
        </td>
    </table>
    <table align="center">
        <td>
            <table width="217" class="table3">
                <tr>
                    <td align="center" class="m4">前年：197件</td>
                    <!-- {% tentou_data2 %} -->
                </tr>
            </table>
        </td>
        <td>
            <table width="217" class="table3">
                <tr>
                    <td align="center" class="m4">前年：192件</td>
                    <!-- {% jyokusou_data2 %} -->
                </tr>
            </table>
        </td>
        <td>
            <table width="217" class="table3">
                <tr>
                    <td align="center" class="m4">前年：3件</td>
                    <!-- {% yokusei_data2 %} -->
                </tr>
            </table>
        </td>
        <td>
            <table width="217" class="table3">
                <tr>
                    <td align="center" class="m4">前年：2件</td>
                    <!-- {% yokusei_data2 %} -->
                </tr>
            </table>
        </td>
        <td>
            <table width="217" class="table3">
                <tr>
                    <td align="center" class="m4">前年：0件</td>
                    <!-- {% yokusei_data2 %} -->
                </tr>
            </table>
        </td>
    </table>
    <table align="center">
        <td>
            <table align="center" cellpadding="10" class="table2">
                <tr>
                    <td><canvas id='断り事例_来院区分' width='300' height='250'></canvas></td>
                </tr>
            </table>
        </td>
        <td>
            <table align="center" cellpadding="10" class="table2">
                <tr>
                    <td><canvas id='断り事例_総件数推移' width='753' height='250'></canvas></td>
                </tr>
            </table>
        </td>
    </table>
    <script src="../../../js/location.js"></script>
</body>